<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>研究方法</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>
<nav><ul><li><a href="../../../index.html"><span data-lang="zh">專案主頁</span><span data-lang="en">Project Home</span></a></li><li><a href="index.html"><span data-lang="zh">首頁</span><span data-lang="en">Home</span></a></li><li><a href="introduction.html"><span data-lang="zh">緒論</span><span data-lang="en">Introduction</span></a></li><li><a href="methodology.html"><span data-lang="zh">研究方法</span><span data-lang="en">Methodology</span></a></li><li><a href="results.html"><span data-lang="zh">實證結果</span><span data-lang="en">Results</span></a></li><li><a href="discussion.html"><span data-lang="zh">討論</span><span data-lang="en">Discussion</span></a></li><li><a href="conclusion.html"><span data-lang="zh">結論</span><span data-lang="en">Conclusion</span></a></li><li><a href="appendix.html"><span data-lang="zh">附錄</span><span data-lang="en">Appendix</span></a></li></ul><span class="nav-title"><span data-lang="zh">V-004：技術分析能預測股價？</span><span data-lang="en">V-004: Can Technical Analysis Predict Stock Prices?</span></span><button id="lang-toggle" onclick="toggleLang()">Switch to EN</button></nav>
<div class="container">

    <h1><span data-lang="zh">研究方法</span><span data-lang="en">Methodology</span></h1>

    <h2><span data-lang="zh">2.1 數據與標的</span><span data-lang="en">2.1 Data and Target</span></h2>
    <div data-lang="zh"><p>本研究以 0050（元大台灣50 ETF）為標的，使用 5264 個交易日的日線數據（OHLCV + adj_close），涵蓋 2004-07-01 至 2025-11-25（等待最長均線 SMA(200) 暖機後）。數據來源為本地資料庫（經 V-001 完整驗證），使用 adj_close 計算日報酬率以含入股息再投入。</p><p>選擇 0050 的理由：(1) 與前序實驗一致 (2) 流動性充足、價差小，接近理想交易條件 (3) 若技術分析連在指數 ETF 都無效，在個股上的表現更難歸因於指標本身。</p><p><strong>研究定位：</strong>本研究旨在提供一般民眾具有科學審視的觀點，協助大眾採用多元角度看待投資論點，而非進行極度嚴謹的學術驗證。</p></div><div data-lang="en"><p>This study uses 0050 (Yuanta Taiwan 50 ETF) with 5264 trading days of daily OHLCV + adj_close data, covering 2004-07-01 to 2025-11-25 (after SMA(200) warm-up). Data source: local database (fully validated in V-001). Returns calculated using adj_close to include dividend reinvestment.</p><p>Reasons for choosing 0050: (1) Consistency with prior experiments (2) High liquidity, narrow spreads—near-ideal trading conditions (3) If technical analysis fails even on an index ETF, results on individual stocks would be harder to attribute to the indicators.</p><p><strong>Study positioning:</strong> This research aims to provide the general public with a scientifically informed perspective, helping people view investment claims from multiple angles, rather than serving as an extremely rigorous academic verification.</p></div>

    <h2><span data-lang="zh">2.2 測試策略</span><span data-lang="en">2.2 Tested Strategies</span></h2>
    <div data-lang="zh"><p>共測試 8 個策略，使用業界標準參數（非最佳化），涵蓋趨勢跟隨和震盪指標兩大類。選擇這 8 個策略的原因是它們在台灣投資社群中最常被提及，也是大多數技術分析課程的核心教學內容。我們刻意不做參數最佳化——因為我們測試的是「一般投資人最可能使用的版本」，而非「事後回顧的最佳版本」。</p></div><div data-lang="en"><p>8 strategies tested using industry-standard parameters (not optimized), covering trend-following and oscillator categories. These were chosen because they are the most commonly mentioned in Taiwan investment communities and the core curriculum of most TA courses. We deliberately avoid parameter optimization — we test the versions "most investors would actually use," not the "best version in hindsight."</p></div>
    <table>
    <tr><th>#</th><th><span data-lang="zh">策略</span><span data-lang="en">Strategy</span></th><th><span data-lang="zh">買進</span><span data-lang="en">Buy</span></th><th><span data-lang="zh">賣出</span><span data-lang="en">Sell</span></th></tr>
    <tr><td>1</td><td>MA(5,20)</td><td>SMA5 > SMA20</td><td>SMA5 < SMA20</td></tr>
    <tr><td>2</td><td>MA(10,50)</td><td>SMA10 > SMA50</td><td>SMA10 < SMA50</td></tr>
    <tr><td>3</td><td>MA(20,60)</td><td>SMA20 > SMA60</td><td>SMA20 < SMA60</td></tr>
    <tr><td>4</td><td>MA(50,200)</td><td>SMA50 > SMA200</td><td>SMA50 < SMA200</td></tr>
    <tr><td>5</td><td>KD(9,3,3)</td><td>K&lt;20, K&gt;D</td><td>K&gt;80, K&lt;D</td></tr>
    <tr><td>6</td><td>MACD(12,26,9)</td><td>MACD > Signal</td><td>MACD < Signal</td></tr>
    <tr><td>7</td><td>RSI(14)</td><td>RSI > 30 (up)</td><td>RSI < 70 (down)</td></tr>
    <tr><td>8</td><td>BB(20,2)</td><td>Close < Lower</td><td>Close > Upper</td></tr>
    </table>

    <div data-lang="zh"><h3>策略信號邏輯說明</h3><p><strong>MA 交叉策略（#1-#4）：</strong>均線交叉是最經典的趨勢跟隨信號。當短期均線向上穿越長期均線（黃金交叉），代表短期動能強於長期趨勢，發出買進信號；反之（死亡交叉）為賣出。我們測試 4 組不同速度的均線組合：MA(5,20) 反應最快但雜訊最多（年均 ~15 次交易）；MA(50,200) 最穩定但最遲鈍（年均 ~1 次），這也是金融媒體口中的「黃金交叉/死亡交叉」原始定義。</p><p><strong>KD 隨機指標（#5）：</strong>KD 是震盪指標的代表，透過比較收盤價在近期價格區間中的相對位置，判斷市場是否「超買」或「超賣」。K 值低於 20 且 K 線由下向上穿越 D 線，視為超賣反轉買進信號；K 值高於 80 且 K 線向下跌破 D 線，視為超買反轉賣出。KD 的持倉時間通常很短（持倉比僅 ~31%），因為超買和超賣條件嚴格，大部分時間不滿足任何進場條件。</p><p><strong>MACD（#6）：</strong>MACD 結合了均線交叉與動量的概念。MACD 線（12 日 EMA - 26 日 EMA）代表短中期動量差異，Signal 線（MACD 的 9 日 EMA）為平滑參考。MACD 線高於 Signal 線時持有。MACD 的交易頻率較高（因為 EMA 對價格變化更敏感），導致交易成本偏高。</p><p><strong>RSI 相對強弱指標（#7）：</strong>RSI 衡量近期漲跌幅的相對強度，範圍 0-100。RSI 從下方穿越 30（由超賣區回升）為買進；從上方穿越 70 後回落為賣出。RSI 的邏輯和 KD 類似——逆勢操作，在市場過度悲觀時買、過度樂觀時賣。</p><p><strong>布林通道（#8）：</strong>以 20 日均線為中軌，上下各加 2 個標準差構成通道。價格跌破下軌（極度超賣）時買進，突破上軌（極度超買）時賣出。布林通道結合了趨勢和波動率的資訊，但觸發條件同樣很嚴格，導致大部分時間空倉。</p></div><div data-lang="en"><h3>Strategy Signal Logic Details</h3><p><strong>MA Crossover (#1-#4):</strong> Moving average crossovers are the classic trend-following signal. When the short-term MA crosses above the long-term MA (golden cross), it signals bullish momentum; the reverse (death cross) signals sell. We test 4 speed combinations: MA(5,20) is fastest but noisiest (~15 trades/year); MA(50,200) is steadiest but slowest (~1 trades/year) - this is the original "golden/death cross" in financial media.</p><p><strong>KD Stochastic (#5):</strong> KD is a classic oscillator comparing the closing price to its recent range. K below 20 with K crossing above D signals an oversold reversal (buy); K above 80 with K crossing below D signals overbought (sell). KD holding time is typically short (~31% holding ratio) because the strict buy/sell thresholds are rarely met simultaneously.</p><p><strong>MACD (#6):</strong> MACD combines crossover and momentum concepts. The MACD line (12-day EMA minus 26-day EMA) represents short-to-medium momentum; the Signal line (9-day EMA of MACD) smooths it. Hold when MACD > Signal. Higher trading frequency due to EMA sensitivity leads to elevated costs.</p><p><strong>RSI (#7):</strong> RSI measures the relative magnitude of recent gains vs losses (0-100). RSI crossing above 30 (recovering from oversold) signals buy; crossing below 70 (falling from overbought) signals sell. Like KD, RSI is contrarian - buy when pessimism peaks, sell when optimism peaks.</p><p><strong>Bollinger Bands (#8):</strong> 20-day SMA as center, +-2 standard deviations as bands. Price below lower band (extreme oversold) triggers buy; above upper band (extreme overbought) triggers sell. Bollinger Bands incorporate both trend and volatility information but have strict trigger conditions, resulting in mostly cash positions.</p></div>

    <h2><span data-lang="zh">2.3 回測設計</span><span data-lang="en">2.3 Backtest Design</span></h2>
    <div data-lang="zh"><p>回測設計中最重要的原則是<strong>避免前視偏差</strong>（look-ahead bias）——也就是不能用「未來的資訊」做「過去的決策」。在現實中，你只能在收盤後才知道今天的收盤價和技術指標值，所以你最快只能在隔天才執行交易。我們的回測嚴格遵守這個原則：</p><ul><li><strong>訊號產生：</strong>T 日收盤後根據技術指標產生買/賣訊號</li><li><strong>執行時點：</strong>T+1 日收盤價執行（避免前視偏差）。這個設計略偏保守（實務上可在開盤時執行），但確保結果的可靠性。</li><li><strong>部位管理：</strong>全倉買入/全倉賣出（二元持倉）。不做部分買賣，以簡化分析並避免引入額外的主觀判斷。</li><li><strong>報酬計算：</strong>使用 adj_close（含股息再投入），空倉期間報酬 = 0%。空倉不收利息——如果存入貨幣市場基金約可獲得 1-1.5% 年化，但對結論影響微小。</li><li><strong>交易成本：</strong>買入手續費 0.1425% + 賣出手續費 0.1425% + 交易稅 0.1%（ETF 優惠稅率）= 來回 0.385%。對於年交易 16 次的策略，每年成本約 6.2%——這已經超過很多策略的超額報酬了。</li></ul></div><div data-lang="en"><p>The most important principle in backtesting is <strong>avoiding look-ahead bias</strong> — not using "future information" for "past decisions." In reality, you only know closing prices after the market closes, so the earliest you can trade is the next day:</p><ul><li><strong>Signal generation:</strong> Buy/sell signals generated after T-day close based on indicators</li><li><strong>Execution:</strong> T+1 closing price (avoiding look-ahead bias). Slightly conservative but ensures reliability.</li><li><strong>Position:</strong> All-in / all-out (binary). No partial trades, simplifying analysis and avoiding subjective judgment.</li><li><strong>Returns:</strong> Using adj_close (including dividend reinvestment), cash periods = 0%. No cash interest — money market funds would yield ~1-1.5%, but the impact on conclusions is minimal.</li><li><strong>Costs:</strong> Buy commission 0.1425% + sell commission 0.1425% + ETF tax 0.1% = 0.385% round-trip. For strategies with 16 trades/year, annual cost is ~6.2% — exceeding many strategies' excess returns.</li></ul></div>

    <h2><span data-lang="zh">2.4 子期間分析設計</span><span data-lang="en">2.4 Sub-Period Analysis Design</span></h2>
    <div data-lang="zh"><p>為了檢驗結論的穩健性，我們將分析期間以兩種方式切分為子期間：</p><p><strong>等分切分（2004-2013 / 2014-2025）：</strong>將樣本期間均分為兩半。如果策略只在前半段或後半段有效，代表其表現不穩定。等分的好處是兩個子期間的樣本量相近，統計力度一致。</p><p><strong>結構斷點切分（2004-2016 / 2017-2025）：</strong>2017 年前後，台灣股市經歷重要結構性變化：外資法規鬆綁、ETF 市場爆發、當沖降稅、散戶結構改變（小資族與 ETF 定期定額興起）。以此為斷點，可以觀察市場結構變化是否影響技術分析的有效性——如果 AMH（適應性市場假說）成立，我們可能在不同時期觀察到不同的結果。</p><p><strong>為什麼需要子期間分析：</strong>一個策略在 21 年的完整樣本中無效，並不排除它可能在某個特定子期間（例如高波動時期）有效。子期間分析能揭示這種可能性，同時也檢驗「最佳」策略是否跨時期一致——如果不同時期的「最佳」策略不同，代表沒有任何策略具有可靠的預測力。</p></div><div data-lang="en"><p>To test robustness, we split the analysis period two ways:</p><p><strong>Equal split (2004-2013 / 2014-2025):</strong> Dividing the sample in half. If a strategy works only in one half, its performance is unstable. Equal division ensures comparable sample sizes and statistical power.</p><p><strong>Structural break (2004-2016 / 2017-2025):</strong> Around 2017, Taiwan stock markets experienced significant changes: foreign investment deregulation, ETF market explosion, day-trading tax cuts, retail investor structure shifts (small investors and ETF DCA boom). This breakpoint tests whether structural changes affect TA effectiveness — if AMH holds, we may observe different results across regimes.</p><p><strong>Why sub-period analysis:</strong> A strategy failing over 21 years does not preclude effectiveness in specific sub-periods (e.g., high volatility). Sub-period analysis reveals such possibilities while testing whether the "best" strategy is consistent across periods — if different periods favor different strategies, no strategy has reliable predictive power.</p></div>

    <h2><span data-lang="zh">2.5 統計方法</span><span data-lang="en">2.5 Statistical Methods</span></h2>
    <div data-lang="zh"><p>為什麼不能只比較「策略報酬 vs Buy & Hold 報酬」就做結論？因為即使策略報酬低於 B&H，這個差距可能只是隨機波動造成的——就像擲銅板連出 3 次正面，不代表這顆銅板有問題。我們需要統計檢定來判斷差異是否「夠大到不太可能是巧合」。</p><ul><li><strong>Permutation Test（主要方法）：</strong>這是我們的核心檢定。做法是隨機打亂策略的持倉日 10,000 次，計算「如果隨機決定何時持有、何時空倉」的報酬分佈。如果真實策略的超額報酬在這個隨機分佈的前 5% 之外，代表「不太可能是巧合」。比喻：如果一個學生宣稱自己有超能力能猜對考試答案，我們讓猴子隨機選答案 10,000 次，如果學生的成績比 95% 的猴子都高，才承認他可能真有一套。</li><li><strong>Holm-Bonferroni 校正：</strong>我們同時測試 8 個策略，如果每個用 5% 門檻，純運氣也有約 33% 機率至少出現一個「假顯著」。Holm-Bonferroni 校正提高了門檻，確保全部 8 個檢定合在一起的假陽性率不超過 5%。</li><li><strong>Bootstrap CI：</strong>10,000 次重抽樣，估計年化超額報酬的 95% 信賴區間。如果信賴區間包含 0，代表超額報酬可能為零。</li><li><strong>Cohen's d：</strong>衡量效果量的大小。即使統計上顯著，如果 Cohen's d 很小（< 0.2），代表實際差異微乎其微，在投資實務上沒有意義。</li></ul></div><div data-lang="en"><p>Why can't we just compare "strategy return vs B&H" and conclude? Because even if strategy return is lower, the gap might be random noise — like flipping 3 heads in a row doesn't mean the coin is biased. Statistical tests determine if the difference is "too large to be coincidence."</p><ul><li><strong>Permutation Test (primary):</strong> Core test. Randomly shuffles holding days 10,000 times to build a distribution of "random timing" returns. If real excess return exceeds the 95th percentile, it is unlikely coincidence. Analogy: if a student claims supernatural exam-guessing ability, we have monkeys randomly guess 10,000 times — only if the student beats 95% of monkeys do we acknowledge possible skill.</li><li><strong>Holm-Bonferroni correction:</strong> Testing 8 strategies at 5% each gives ~33% chance of at least one false positive. Holm-Bonferroni raises the bar so the combined false positive rate stays under 5%.</li><li><strong>Bootstrap CI:</strong> 10,000 resamples for 95% confidence interval. If CI includes 0, excess return may be zero.</li><li><strong>Cohen's d:</strong> Measures effect size. Even if statistically significant, Cohen's d < 0.2 means the practical difference is trivial for investment purposes.</li></ul></div>

    <div data-lang="zh"><h3>為什麼選用 Permutation Test 而非 t-test？</h3><p>傳統的 t 檢定假設資料為常態分佈，但金融報酬率通常有厚尾（極端值比常態分佈多）和偏態。Permutation Test 是「無母數」方法——它不假設任何特定分佈，而是透過隨機打亂來建構虛無假說的分佈。這讓檢定結果在面對金融數據的非常態特性時更為可靠。</p><p>具體操作：我們保留策略的「持倉天數」不變（例如某策略共持倉 3,000 天），但隨機打亂「哪些天持倉」。重複 10,000 次，就得到「隨機擇時」的報酬分佈。如果真實策略的報酬在這個分佈中不算特別高（未超過 95 百分位），就沒有證據認為策略的擇時比隨機好。</p><h3>為什麼需要多重比較校正？</h3><p>多重比較問題是統計學中最常被忽視但影響最大的問題之一。當你同時檢定 8 個策略，每個用 5% 的顯著水準，出現至少一個「假陽性」的機率為：1 - (1-0.05)^8 = 33.7%。也就是說，即使所有策略都無效，也有三分之一的機率「看起來」至少有一個有效——這就是為什麼很多技術分析回測聲稱「發現有效策略」，但實際上只是統計幻覺。</p><p>Holm-Bonferroni 校正的做法：將 8 個 p 值從小到大排序，第 1 小的乘以 8、第 2 小的乘以 7……依此類推。校正後的 p 值必須低於 0.05，才算統計顯著。這比 Bonferroni 校正（所有 p 值都乘以 8）更有力度，但仍然嚴格控制了「家族錯誤率」（Family-Wise Error Rate）。</p></div><div data-lang="en"><h3>Why Permutation Test Instead of t-test?</h3><p>Traditional t-tests assume normally distributed data, but financial returns typically have fat tails (more extremes than normal) and skewness. The Permutation Test is "non-parametric" — it makes no distributional assumptions, building the null distribution through randomization. This makes results more reliable given the non-normal characteristics of financial data.</p><p>Implementation: We keep the strategy's total "invested days" fixed (e.g., 3,000 days) but randomly shuffle "which days" are invested. Repeating 10,000 times yields a "random timing" return distribution. If the real strategy does not exceed the 95th percentile, there is no evidence its timing is better than random.</p><h3>Why Multiple Comparison Correction?</h3><p>The multiple comparison problem is one of the most overlooked yet impactful issues in statistics. Testing 8 strategies at 5% each, the probability of at least one false positive is: 1 - (1-0.05)^8 = 33.7%. Even if all strategies are worthless, there is a one-third chance at least one "appears" significant — this is why many TA backtests claim to "find effective strategies" when they are merely statistical illusions.</p><p>Holm-Bonferroni procedure: sort 8 p-values ascending, multiply the smallest by 8, second-smallest by 7, and so on. Corrected p-values must fall below 0.05 to be significant. This is more powerful than Bonferroni (multiplying all by 8) while still strictly controlling the Family-Wise Error Rate (FWER).</p></div>
    
<footer><div data-lang="zh"><p>V-004 技術分析能預測股價？ | 用數據說話：投資策略回測研究</p></div><div data-lang="en"><p>V-004 Can Technical Analysis Predict Stock Prices? | Let Data Speak: Investment Strategy Backtesting</p></div></footer>
</div>
<script src="js/main.js"></script>
</body>
</html>